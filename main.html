<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>locomotivescroll</title>
    <link rel="stylesheet" href="assets/css/reset.css" />
    <link rel="stylesheet" href="assets/css/common.css" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <link rel="stylesheet" href="assets/css/respond.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.5.1/gsap.min.js"></script>
    <script src="https://unpkg.com/gsap@3/dist/ScrollTrigger.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/locomotive-scroll@3.5.4/dist/locomotive-scroll.min.js"></script>
  </head>
  <body>

    <header id="header" class="header">
        <h1 class="headerLogo">
            <a class="headerLogo__link" href="./index.html">
                <span class="headerLogo__icon">
                    <span class="mouth js-mouth"></span>
                </span>
                <span class="headerLogo__text">FE<br/>DEVELOPER</span>
            </a>
        </h1>

        <div class="scrollGage">
            <span class="screenHide">현재 위치</span>
            <span class="scrollGage__percent"></span>
            <!--<span class="scrollGage__bar"></span>-->
            <span class="scrollGage__position"></span>
            
        </div>

        <nav id="nav" class="nav">
            <button class="nav__btn--open " type="button"><span class="screenHide">전체메뉴보기</span></button>
            <div id="gnb" class="gnb">
                <ul class="gnb__list">
                    <li class="gnb__item">
                        <a class="gnb__link" href=""></a>
                    </li>
                </ul>
                <button class="gnb__btn--close" type="button"><span class="screenHide">전체메뉴닫기</span></button>
            </div>
        </nav>
    </header>
    <!---header-->

    <main id="contents">
        <section class="visual" data-textcolor="#bcb8ad" data-bgcolor="#fff">
            <div class="visual__tit">
                <h2>G.SUNAH<br/>PORTFOLIO</h2>
                <span class="visual__tit--move">HELLO, WORLD!</span>
            </div>

            <div class="visual__sbj">
                <div class="visual__sbj--move" data-scroll data-scroll-speed="3" data-scroll-direction="horizontal">
                    <span>I'M FRONTEND DEVELOPER</span>
                    <span>I'M FRONTEND DEVELOPER</span>
                </div>
            </div>

            <div class="visual__emoji">
                <div class="visual__emojiBg">
                    <span>
                        <img src="./assets/img/visual__emojiBg01.png" alt="">
                    </span>
                    <span>
                        <img src="./assets/img/visual__emojiBg02.png" alt="">
                    </span>
                    <span>
                        <img src="./assets/img/visual__emojiBg03.png" alt="">
                    </span>
                    <span>
                        <img src="./assets/img/visual__emojiBg04.png" alt="">
                    </span>
                    <span>
                        <img src="./assets/img/visual__emojiBg05.png" alt="">
                    </span>
                    <span>
                        <img src="./assets/img/visual__emojiBg06.png" alt="">
                    </span>
                </div>

                <div class="visual__emojiCircle">
                    <span  >
                        <img src="./assets/img/visual__emojiCircle01.png" alt="">
                    </span>
                    <span class="circle02"  data-scroll data-scroll-speed="5" data-scroll-direction="vertical">
                        <img src="./assets/img/visual__emojiCircle02.png" alt="" >
                    </span>
                    <span >
                        <img src="./assets/img/visual__emojiCircle03.png" alt="">
                    </span>
                    <span>
                        <img src="./assets/img/visual__emojiCircle04.png" alt="" >
                    </span>
                    <span  class="circle05" data-scroll data-scroll-speed="5" data-scroll-direction="vertical">
                        <img src="./assets/img/visual__emojiCircle05.png" alt="">
                    </span>
                    <span>
                        <img src="./assets/img/visual__emojiCircle06.png" alt="" >
                    </span>
                </div>

                <div class="visual__emojiItem">
                    <span>
                        <img src="./assets/img/visual__emojiItem01.png" alt="">
                    </span>
                    <span>
                        <img src="./assets/img/visual__emojiItem02.png" alt="">
                    </span>
                    <span>
                        <img src="./assets/img/visual__emojiItem03.png" alt="">
                    </span>
                    <span>
                        <img src="./assets/img/visual__emojiItem04.png" alt="">
                    </span>
                    <span>
                        <img src="./assets/img/visual__emojiItem05.png" alt="">
                    </span>
                    <span class="emoji06" data-scroll data-scroll-speed="5" data-scroll-direction="vertical">
                        <img src="./assets/img/visual__emojiItem06.png" alt="">
                    </span>
                    <span>
                        <img src="./assets/img/visual__emojiItem07.png" alt="">
                    </span>
                    <span>
                        <img src="./assets/img/visual__emojiItem08.png" alt="">
                    </span>
                    <span>
                        <img src="./assets/img/visual__emojiItem09.png" alt="">
                    </span>
                </div>
            </div>
        </section>
        <!-- //section1 -->
        
        <section id="section2" data-bgcolor="#e3857a" data-textcolor="#f1dba7"></section>
        <!-- //section2 -->

        <section id="section3" class="horizontal-scroll" data-textcolor="#bcb8ad" data-bgcolor="#815946">
            <div class="pin-wrap">
                <div>1</div>
                <div>2</div>
                <div>3</div>
                <div>4</div>
            </div>
        </section>
        <!-- //section3 -->

        <section id="section4" data-bgcolor="#e3857a" data-textcolor="#f1dba7"></section>
        <!-- //section4 -->

        <section id="section5" data-bgcolor="#e3857a" data-textcolor="#f1dba7"></section>
        <!-- //section5 -->

        <section id="section6" data-textcolor="#bcb8ad" data-bgcolor="#032f35"></section>
        <!-- //section6 -->
    </main>

    <script>
        window.addEventListener("load", function () {
            gsap.registerPlugin(ScrollTrigger);

            const pageContainer = document.querySelector("#contents");
            pageContainer.setAttribute("data-scroll-container", "");

            const scroller = new LocomotiveScroll({
                el: pageContainer,
                smooth: true,
                getDirection: true,
            });

            scroller.on("scroll", function (t) {
                document.documentElement.setAttribute("data-direction", t.direction);
            });

            scroller.on("scroll", ScrollTrigger.update);

            ScrollTrigger.scrollerProxy(pageContainer, {
                scrollTop(value) {
                    return arguments.length
                    ? scroller.scrollTo(value, 0, 0)
                    : scroller.scroll.instance.scroll.y;
                },
                getBoundingClientRect() {
                    return {
                        left: 0,
                        top: 0,
                        width: window.innerWidth,
                        height: window.innerHeight,
                    };
                },
                pinType: pageContainer.style.transform ? "transform" : "fixed",
            });

        // Pinning and horizontal scrolling
        let horizontalSections = document.querySelectorAll(".horizontal-scroll");

        horizontalSections.forEach((horizontalSection) => {
            let pinWrap = horizontalSection.querySelector(".pin-wrap");
            let pinWrapWidth = pinWrap.offsetWidth;
            let horizontalScrollLength = pinWrapWidth - window.innerWidth;

            gsap.to(pinWrap, {
                scrollTrigger: {
                    scroller: "[data-scroll-container]",
                    scrub: true,
                    trigger: horizontalSection,
                    pin: true,
                    start: "top top",
                    markers: true,
                    end: () => `+=${pinWrapWidth}`,
                    invalidateOnRefresh: true,
                },
                x: -horizontalScrollLength,
                ease: "none",
            });
        });

        /* COLOR CHANGER */
        const scrollColorElems = document.querySelectorAll("[data-bgcolor]");

        scrollColorElems.forEach((colorSection, i) => {
            const prevBg = i === 0 ? "" : scrollColorElems[i - 1].dataset.bgcolor;
            const prevText = i === 0 ? "" : scrollColorElems[i - 1].dataset.textcolor;

            ScrollTrigger.create({
                trigger: colorSection,
                scroller: "[data-scroll-container]",
                start: "top 50%",
                onEnter: () =>
                gsap.to("body", {
                    backgroundColor: colorSection.dataset.bgcolor,
                    color: colorSection.dataset.textcolor,
                    overwrite: "auto",
                }),
                onLeaveBack: () =>
                gsap.to("body", {
                    backgroundColor: prevBg,
                    color: prevText,
                    overwrite: "auto",
                }),
            });
        });

        ScrollTrigger.addEventListener("refresh", () => scroller.update());
        ScrollTrigger.refresh();
    });
    </script>
  </body>
</html>
